1. Database & Infrastructure Layer
Prisma 7 Setup: Configured the schema.prisma with a User model and established a connection to your PostgreSQL database.

Driver Adapter: Integrated @prisma/adapter-pg to allow Prisma 7 to use the native pg driver for better performance.

Data Seeding: Successfully executed a seed script that populated your database with initial test users (alice_wonder, builder_bob).

Environment Management: Fixed a SASL authentication error by ensuring environment variables are loaded correctly using dotenv.

2. NestJS Core & Shared Layer
Prisma Module: Created a global-ready PrismaModule and PrismaService that manages the database connection.

Dependency Injection: Exported the PrismaService so it can be injected into any other module (like Users, Conversations, etc.) without re-initializing the connection.

3. GraphQL API Layer (Code-First)
Apollo Server Configuration: Set up the GraphQLModule in the AppModule to automatically generate the schema.gql file.

Object Types (Models): Defined the User model with decorators, including a fix for TypeScript strict property initialization using the ! operator.

Input Types: Created a CreateUserInput DTO to handle data sent from the client during mutations.

4. Domain Layer (Users Module)
Resolvers: Implemented the UsersResolver which handles:

Queries: A users query to fetch all users from the database.

Mutations: A createUser mutation to add new users via GraphQL.








// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyAGrlP5NSYU_DcsBxB3CepAOOARTDXInLs",
  authDomain: "user-authentication-6ca8d.firebaseapp.com",
  projectId: "user-authentication-6ca8d",
  storageBucket: "user-authentication-6ca8d.firebasestorage.app",
  messagingSenderId: "630638231214",
  appId: "1:630638231214:web:a873373d3ce95f0e2ff73f"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);



  /**
   * Transitional Firebase login (backend-only):
   * - Validates user against Firebase (email/password) via REST API using APIKEY
   * - Links/syncs DB user with firebaseUid
   * - Increments tokenVersion in DB
   * - Sets Firebase custom claim tv=<tokenVersion>
   * - Refreshes token so returned ID token includes the updated tv claim
   * - Returns { accessToken: <FirebaseIdToken>, user }
   */

mutation SendNewMessage($conversationId: String!, $content: String!) {
  sendMessage(conversationId: $conversationId, content: $content) {
    id
    content
    createdAt
    sender {
      userName
    }
  }
}

mutation StartChat($recipientId: String!) {
  startConversation(recipientId: $recipientId) {
    id
    createdAt
    participants {
      user {
        id
        userName
        email
      }
    }
  }
}

mutation Login {
  login(data: {
    email: "preethi.h.oxinfy@gmail.com",
    password: "Password@123"
  }) {
    accessToken
    user {
      userName
      firstName
    }
  }
}

mutation Register {
  register(data: {
    email: "bala.m.oxinfy@gmail.com",
    firstName: "Bala",
    lastName: "chander",
    userName: "bala.m.ox",
    mobileNumber: "+919874587820",
    password: "Password@123",
    confirmPassword: "Password@123"
  }) {
    id
    email
    userName
  }
}

{
  "recipientId": "647febe2-db03-47f5-bbe2-cdf5b03def5e"
}

{
  "conversationId": "c1a6993d-4586-4cc2-9300-d949f577ac4c",
  "content": "Hey! hi how are you."
}

{"Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI3YzQxYjc4ZS04ZWU1LTRlMDYtOGJlZi02YjM4NWEyY2U4MDMiLCJlbWFpbCI6InByZWV0aGkuaC5veGluZnlAZ21haWwuY29tIiwidG9rZW5WZXJzaW9uIjoxLCJpYXQiOjE3NzA2NDE4NDksImV4cCI6MTc3MTI0NjY0OX0.cBlqzynHLarT9pV75ec-h2495osCuuPXF4Xj4syCWCg"}
